Core=function(){this.layerType=["green","sport"];this.layerID={region:-1,green:0,sport:1};this.layerCaptions={};this.layerCaptions[this.layerID.region]="Regions";var b=this;$(".board").animate({"margin-right":"-=500"});this.plotRegionStat=function(g,e,c,k,a){a={top:60,right:60,bottom:20,left:60};var p=!0,f=.3*window.innerWidth/2-.01*window.innerWidth,h=.6*window.innerHeight/2-.01*window.innerWidth;h<f&&(f=h);var h=f-a.left-a.right,r=1.5*f-a.left-a.right,q=f-a.top-a.bottom,f=1.5*f-a.top-a.bottom,t=
"rgb(255,177,31) rgb(64,255,252) rgb(238,51,255) rgb(128,133,133) rgb(144,103,167) rgb(171,104,87) rgb(204,194,16)".split(" ");d3.scale.linear().domain([0,100]).range([0,100]);var n=d3.scale.linear().domain([0,100]).range([0,100]),m=d3.scale.linear().domain([0,100]).range([0,100]),u=d3.scale.linear().domain([0,100]).range([0,100]),v=d3.scale.linear().domain([0,100]).range([0,100]),w=d3.scale.linear().domain([0,100]).range([0,100]),x=d3.scale.linear().domain([0,100]).range([0,100]),y=d3.scale.linear().domain([0,
100]).range([0,100]),z=d3.scale.linear().domain([0,100]).range([0,100]),n={activity:n,culinary:m,cultural:u,green:v,nonleisure:w,relaxation:x,spiritual:y,sport:z},m=[],l;for(l in k)m.push(t[k[l]]);k=".starPlots";l="inline";"chartBig"===c&&(h=r,q=f,p=!1,k=".bigPlot",l="block");var d=d3.select(k).append("svg").attr("class",c).attr("width",h+a.left+a.right).attr("height",q+a.top+a.bottom).style("display",l).style("vertical-align","middle").style("margin","auto");d.text("test");g=starPlot().width(h).propertiesList(g).scales(n).colours(m).title(e).margin(a).labelMargin(15);
d.append("g").call(g);d.selectAll(".star-interaction").on("mouseover",function(a){p&&(d.selectAll(".star-label").style("display","none"),d.append("circle").attr("class","interaction-circle").attr("r",4).attr("cx",a.x).attr("cy",a.y).attr("fill","gray"),d.append("text").attr("class","star-interaction-label").text(a.key+":  "+Math.round(10*a.value)/10).attr("x",a.textX).attr("y",a.textY))}).on("mouseout",function(a){d.selectAll(".star-label").style("display","");d.selectAll(".interaction-circle").remove();
d.selectAll(".star-interaction-label").remove()}).on("click",function(a){b.showMapStatHandle(b.layerID[a.key],c.substr(5).split(","))})};this.setShowMapStatHandle=function(g){b.showMapStatHandle=g;ajax("/data/objects/types",function(e){b.layerType=e;for(e=0;e<b.layerType.length;++e)b.layerID[b.layerType[e]]=e;b.layerType.forEach(function(c){b.layerCaptions[b.layerID[c]]=c;$(".dropdown-menu").html($(".dropdown-menu").html()+'<li><a href="#" id="'+c+'-layer-switcher">'+c+"</a></li>");$(".dropdown-menu").on("click",
"#"+c+"-layer-switcher",function(){$("span#layer-caption").html(c);g(b.layerID[c])})})});$(".dropdown-menu").on("click","#region-layer-switcher",function(){$("span#layer-caption").html("Regions");g(b.layerID.region)})}};var board_hidden=!0,core=new Core,map=new Map(core);core.setShowMapStatHandle(map.showMapStat);map.drawRegions();
